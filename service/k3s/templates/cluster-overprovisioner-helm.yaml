apiVersion: helm.cattle.io/v1
kind: HelmChart
metadata:
  name: cluster-overprovisioner
  namespace: kube-system
spec:
  chart: cluster-overprovisioner
  repo: https://charts.deliveryhero.io/
  targetNamespace: default
  valuesContent: |-

    deployments:
      - name: default
        replicaCount: ${replicas}
        resources:
          limits:
            cpu: ${cpu}
            memory: ${memory}
          requests:
            cpu: ${cpu}
            memory: ${memory}
        affinity:
          nodeAffinity:
            requiredDuringSchedulingIgnoredDuringExecution:
              nodeSelectorTerms:
              - matchExpressions:
                - key: node-role.kubernetes.io/master
                  operator: DoesNotExist
        # affinity:
        #   nodeAffinity:
        #     requiredDuringSchedulingIgnoredDuringExecution:
        #       nodeSelectorTerms:
        #       - matchExpressions:
        #         - key: k8s.io/node-type
        #           operator: DoesNot
        #           value: "agent"
        # nodeSelector:
        #   k8s.io/node-type: "agent"
